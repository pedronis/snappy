#!/bin/sh -e

case "${1:-}" in
    attached)
        dbus-send --system --print-reply \
            --dest=com.canonical.UbuntuAdvantage \
            /com/canonical/UbuntuAdvantage/Manager \
            org.freedesktop.DBus.Properties.Get \
            string:com.canonical.UbuntuAdvantage.Manager \
            string:Attached
        ;;
    daemon-version)
        dbus-send --system --print-reply \
            --dest=com.canonical.UbuntuAdvantage \
            /com/canonical/UbuntuAdvantage/Manager \
            org.freedesktop.DBus.Properties.Get \
            string:com.canonical.UbuntuAdvantage.Manager \
            string:DaemonVersion
        ;;
    uaclient-conf-r)
        cat /etc/ubuntu-advantage/uaclient.conf > /dev/null
        ;;
    *)
        echo "usage: $0 {attached|daemon-version|uaclient-conf-r}" >&2
        exit 1
        ;;
esac
